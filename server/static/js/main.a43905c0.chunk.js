(this["webpackJsonpeer-search-client"]=this["webpackJsonpeer-search-client"]||[]).push([[0],{13:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),l=a.n(c),m=a(2),s=a.n(m),o=a(3),i=a(1),u="3000"===window.location.port?"http://localhost:5000":window.location.protocol+"//"+window.location.host,d=function(e){var t=e.record,a=Object(n.useState)(!1),c=Object(i.a)(a,2),l=c[0],m=c[1],d=Object(n.useState)("\u5728\u5eab\uff1a\u53d6\u5f97\u4e2d..."),E=Object(i.a)(d,2),f=E[0],p=E[1],b=Object(n.useState)("\u8a66\u8074\u6a5f\uff1a\u53d6\u5f97\u4e2d..."),h=Object(i.a)(b,2),N=h[0],w=h[1];return Object(n.useEffect)((function(){l&&function(){var e=Object(o.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/get_stock_data?item_url=").concat(t.item_url));case 2:if(!(a=e.sent).ok){e.next=11;break}return e.next=6,a.json();case 6:0===(n=e.sent).stock.length?p("\u5728\u5eab\uff1a\u306a\u3057"):p("\u5728\u5eab\uff1a"+n.stock.map((function(e){return"".concat(e.name,"(").concat(e.info,")")})).join("\u3001")),0===n.sample.length?w("\u8a66\u8074\u6a5f\uff1a\u306a\u3057"):w("\u8a66\u8074\u6a5f\uff1a"+n.sample.join("\u3001")),e.next=13;break;case 11:p("\u5728\u5eab\uff1a\u4e0d\u660e"),w("\u8a66\u8074\u6a5f\uff1a\u4e0d\u660e");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l]),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{className:"align-middle"},r.a.createElement("a",{href:t.item_url,target:"_blank",rel:"noopener noreferrer"},t.name)),r.a.createElement("td",{className:"align-middle"},t.price),r.a.createElement("td",{className:"align-middle"},r.a.createElement("img",{src:t.image_url,width:60,height:60,alt:t.name})),r.a.createElement("td",{className:"align-middle text-center"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return m(!l)}},"\u5728\u5eab"))),l?r.a.createElement("tr",null,r.a.createElement("td",{className:"align-middle",colSpan:4},r.a.createElement("ul",{className:"my-0"},r.a.createElement("li",null,f),r.a.createElement("li",null,N)))):r.a.createElement(r.a.Fragment,null))},E=function(e){var t=e.newItemList,a=Object(n.useState)(""),c=Object(i.a)(a,2),l=c[0],m=c[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),u=o[0],E=o[1],f=Object(n.useState)(!1),p=Object(i.a)(f,2),b=p[0],h=p[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-3 justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-8"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group d-flex my-0"},r.a.createElement("label",{className:"text-nowrap mr-3 mt-2",htmlFor:"filterWord"},"\u540d\u524d\u30d5\u30a3\u30eb\u30bf"),r.a.createElement("input",{type:"text",id:"filterWord",className:"form-control",placeholder:"\u5165\u529b\u3057\u305f\u30ef\u30fc\u30c9\u3092\u542b\u3080\u3082\u306e\u306e\u307f\u8868\u793a",value:l,onChange:function(e){m(e.currentTarget.value)}}))))),r.a.createElement("div",{className:"row mt-3 justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-8"},r.a.createElement("table",{className:"border table table-striped table-nowrap table-bordered table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap",onClick:function(){"\u5546\u54c1\u540d"!==u?(E("\u5546\u54c1\u540d"),h(!1)):b?E(""):h(!0)}},"\u5546\u54c1\u540d"!==u?"\u5546\u54c1\u540d":"\u5546\u54c1\u540d"+(b?"\u2193":"\u2191")),r.a.createElement("th",{className:"text-nowrap",onClick:function(){"\u4fa1\u683c"!==u?(E("\u4fa1\u683c"),h(!1)):b?E(""):h(!0)}},"\u4fa1\u683c"!==u?"\u4fa1\u683c":"\u4fa1\u683c"+(b?"\u2193":"\u2191")),r.a.createElement("th",{className:"text-nowrap"},"\u753b\u50cf"),r.a.createElement("th",{className:"text-nowrap"},"\u8a73\u7d30"))),r.a.createElement("tbody",null,function(){var e=t.filter((function(e){return""===l||e.name.includes(l)}));switch(u){case"\u5546\u54c1\u540d":e=e.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}));break;case"\u4fa1\u683c":e=e.sort((function(e,t){return e.price>t.price?1:e.price<t.price?-1:0}))}return b&&(e=e.reverse()),e}().map((function(e,t){return r.a.createElement(d,{record:e,key:t})})))))))},f=function(e){var t=e.record,a=Object(n.useState)(!1),c=Object(i.a)(a,2),l=c[0],m=c[1],d=Object(n.useState)({shop_name:"\u53d6\u5f97\u4e2d...",rank:"\u53d6\u5f97\u4e2d...",fancy_box_flg:!1,item_status:"\u53d6\u5f97\u4e2d...",accessories:"\u53d6\u5f97\u4e2d...",stockout:"\u53d6\u5f97\u4e2d...",compensation:"\u53d6\u5f97\u4e2d..."}),E=Object(i.a)(d,2),f=E[0],p=E[1];Object(n.useEffect)((function(){l&&function(){var e=Object(o.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/get_used_data?item_url=").concat(t.item_url));case 2:if(!(a=e.sent).ok){e.next=10;break}return e.next=6,a.json();case 6:n=e.sent,p(n),e.next=11;break;case 10:p({shop_name:"\u4e0d\u660e",rank:"\u4e0d\u660e",fancy_box_flg:!1,item_status:"\u4e0d\u660e",accessories:"\u4e0d\u660e",stockout:"\u4e0d\u660e",compensation:"\u4e0d\u660e"});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[l]);var b=f.item_status.includes("\u3001")?f.item_status.split("\u3001").filter((function(e){return""!==e})):[f.item_status],h=f.accessories.includes("\u25a1")?f.accessories.split("\u25a1").filter((function(e){return""!==e})):[f.accessories],N=f.stockout.includes("\u25a1")?f.stockout.split("\u25a1").filter((function(e){return""!==e})):[f.stockout];return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{className:"align-middle"},r.a.createElement("a",{href:t.item_url,target:"_blank",rel:"noopener noreferrer"},t.name)),r.a.createElement("td",{className:"align-middle"},t.price),r.a.createElement("td",{className:"align-middle"},r.a.createElement("img",{src:t.image_url,width:60,height:60,alt:t.name})),r.a.createElement("td",{className:"align-middle text-center"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return m(!l)}},"\u5728\u5eab"))),l?r.a.createElement("tr",null,r.a.createElement("td",{className:"align-middle",colSpan:4},r.a.createElement("ul",{className:"my-0"},r.a.createElement("li",null,r.a.createElement("strong",null,"\u5e97\u540d\uff1a"),f.shop_name),r.a.createElement("li",null,r.a.createElement("strong",null,"\u30e9\u30f3\u30af\uff1a"),f.rank),r.a.createElement("li",null,r.a.createElement("strong",null,"\u5916\u7bb1\uff1a"),f.fancy_box_flg?"\u6709\u308a":"\u7121\u3057"),r.a.createElement("li",null,r.a.createElement("strong",null,"\u5546\u54c1\u72b6\u614b\uff1a"),1===b.length?b[0]:r.a.createElement("ul",{className:"my-0"},b.map((function(e){return r.a.createElement("li",{key:e},e)})))),r.a.createElement("li",null,r.a.createElement("strong",null,"\u4ed8\u5c5e\u5185\u5bb9\uff1a"),1===h.length?h[0]:r.a.createElement("ul",{className:"my-0"},h.map((function(e){return r.a.createElement("li",{key:e},e)})))),r.a.createElement("li",null,r.a.createElement("strong",null,"\u6b20\u54c1\u5185\u5bb9\uff1a"),1===N.length?N[0]:r.a.createElement("ul",{className:"my-0"},N.map((function(e){return r.a.createElement("li",{key:e},e)})))),r.a.createElement("li",null,r.a.createElement("strong",null,"\u88dc\u511f\uff1a"),f.compensation)))):r.a.createElement(r.a.Fragment,null))},p=function(e){var t=e.usedItemList,a=Object(n.useState)(""),c=Object(i.a)(a,2),l=c[0],m=c[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),u=o[0],d=o[1],E=Object(n.useState)(!1),p=Object(i.a)(E,2),b=p[0],h=p[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row mt-3 justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-8"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group d-flex mt-0"},r.a.createElement("label",{className:"text-nowrap mr-3 mt-2",htmlFor:"filterWord"},"\u540d\u524d\u30d5\u30a3\u30eb\u30bf"),r.a.createElement("input",{type:"text",id:"filterWord",className:"form-control",placeholder:"\u5165\u529b\u3057\u305f\u30ef\u30fc\u30c9\u3092\u542b\u3080\u3082\u306e\u306e\u307f\u8868\u793a",value:l,onChange:function(e){m(e.currentTarget.value)}}))))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-8"},r.a.createElement("table",{className:"border table table-striped table-nowrap table-bordered table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap",onClick:function(){"\u5546\u54c1\u540d"!==u?(d("\u5546\u54c1\u540d"),h(!1)):b?d(""):h(!0)}},"\u5546\u54c1\u540d"!==u?"\u5546\u54c1\u540d":"\u5546\u54c1\u540d"+(b?"\u2193":"\u2191")),r.a.createElement("th",{className:"text-nowrap",onClick:function(){"\u4fa1\u683c"!==u?(d("\u4fa1\u683c"),h(!1)):b?d(""):h(!0)}},"\u4fa1\u683c"!==u?"\u4fa1\u683c":"\u4fa1\u683c"+(b?"\u2193":"\u2191")),r.a.createElement("th",{className:"text-nowrap"},"\u753b\u50cf"),r.a.createElement("th",{className:"text-nowrap"},"\u8a73\u7d30"))),r.a.createElement("tbody",null,function(){var e=t.filter((function(e){return""===l||e.name.includes(l)}));switch(u){case"\u5546\u54c1\u540d":e=e.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}));break;case"\u4fa1\u683c":e=e.sort((function(e,t){return e.price>t.price?1:e.price<t.price?-1:0}))}return b&&(e=e.reverse()),e}().map((function(e,t){return r.a.createElement(f,{record:e,key:t})})))))))},b=function(e){var t=e.showMode,a=e.newItemList,n=e.usedItemList;switch(t){case"New":return r.a.createElement(E,{newItemList:a});case"Used":return r.a.createElement(p,{usedItemList:n});default:return r.a.createElement(r.a.Fragment,null)}},h=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),m=Object(i.a)(l,2),s=m[0],o=m[1],d=Object(n.useState)([]),E=Object(i.a)(d,2),f=E[0],p=E[1],h=Object(n.useState)("New"),N=Object(i.a)(h,2),w=N[0],g=N[1],v=Object(n.useState)(!1),j=Object(i.a)(v,2),k=j[0],y=j[1];Object(n.useEffect)((function(){k&&("New"===w?fetch("".concat(u,"/search_new?item_name=").concat(a,"&remove_keyword")).then((function(e){return e.json()})).then((function(e){o(e),g("New"),y(!1)})):fetch("".concat(u,"/search_used?item_name=").concat(a,"&remove_keyword")).then((function(e){return e.json()})).then((function(e){p(e),g("Used"),y(!1)})))}),[k]);return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row mt-3 justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-8 text-center"},r.a.createElement("h1",null,"e\u30a4\u30e4\u691c\u7d22\u30a2\u30d7\u30ea"))),r.a.createElement("div",{className:"row mt-3 justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-8"},r.a.createElement("form",{className:"border p-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"searchWord"},"\u691c\u7d22\u30ef\u30fc\u30c9"),r.a.createElement("input",{type:"text",className:"form-control",id:"searchWord",placeholder:"\u691c\u7d22\u30ef\u30fc\u30c9",value:a,onChange:function(e){c(e.currentTarget.value)},readOnly:k})),r.a.createElement("div",{className:"form-group d-flex"},r.a.createElement("label",{className:"text-nowrap mt-2",htmlFor:"showMode"},"\u5546\u54c1\u72b6\u614b"),r.a.createElement("select",{className:"form-control ml-3",id:"showMode",value:w,onChange:function(e){"New"===e.currentTarget.value?(g("New"),o([])):(g("Used"),p([]))},disabled:k},r.a.createElement("option",{value:"New"},"\u65b0\u54c1"),r.a.createElement("option",{value:"Used"},"\u4e2d\u53e4")),r.a.createElement("button",{type:"button",className:"btn btn-primary text-nowrap ml-3",onClick:function(){y(!0)},disabled:""===a||k},"\u691c\u7d22"))))),r.a.createElement("div",{className:"row mt-3 justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-8"},r.a.createElement("div",{className:"spinner-border text-primary ".concat(k?"":"d-none"),role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))),r.a.createElement(b,{showMode:w,newItemList:s,usedItemList:f}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(12);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){e.exports=a(13)}},[[6,1,2]]]);
//# sourceMappingURL=main.a43905c0.chunk.js.map